<table class="table table-bordered table-striped table-condensed">
  <thead>
    <tr>
      <th></th>
      <th colspan="4">Test #1</th>
      <th colspan="4">Test #2</th>
      <th colspan="4">Change</th>
    </tr>
    <tr>
    <th>Name</th>
    <th>M</th>
    <th>R</th>
    <th>W</th>
    <th>Total</th>
    <th>M</th>
    <th>R</th>
    <th>W</th>
    <th>Total</th>
    <th>M</th>
    <th>R</th>
    <th>W</th>
    <th>Total</th>
  </tr>
  </thead>
  <% student_list.each_with_index do |s,i| %>
  <tr>
    <td><%=link_to s.full_name, student_path(s) %></td>
    <td><%=scores1[i].math%></td>
    <td><%=scores1[i].reading%></td>
    <td><%=scores1[i].writing%></td>
    <td><%=scores1[i].total%></td>
    <td><%=scores2[i].math%></td>
    <td><%=scores2[i].reading%></td>
    <td><%=scores2[i].writing%></td>
    <td><%=scores2[i].total%></td>
    <td><%=scores2[i].math - scores1[i].math%></td>
    <td><%=scores2[i].reading - scores1[i].reading%></td>
    <td><%=scores2[i].writing - scores1[i].writing%></td>
    <td><%=scores2[i].total - scores1[i].total%></td>
   
  </tr>
  <% end %>
  <tr>
    <th>Average</th>
    <th><% m = Score.average(:math, :conditions => {test_id: 3, student_id: student_list}).round%><%=m%></th>
    <th><% r = Score.average(:reading, :conditions => {test_id: 3, student_id: student_list}).round%><%=r%></th>
    <th><% w = Score.average(:writing, :conditions => {test_id: 3, student_id: student_list}).round%><%=w%></th>
    <th><%= m + r + w %></th>
    <th><% m = Score.average(:math, :conditions => {test_id: 5, student_id: student_list}).round%><%=m%></th>
    <th><% r = Score.average(:reading, :conditions => {test_id: 5, student_id: student_list}).round%><%=r%></th>
    <th><% w = Score.average(:writing, :conditions => {test_id: 5, student_id: student_list}).round%><%=w%></th>
    <th><%= m + r + w %></th>
  </tr>
  <tr>
    <th>Maximum</th>
    <th><% m = Score.maximum(:math, :conditions => {test_id: 3, student_id: student_list}).round%><%=m%></th>
    <th><% r = Score.maximum(:reading, :conditions => {test_id: 3, student_id: student_list}).round%><%=r%></th>
    <th><% w = Score.maximum(:writing, :conditions => {test_id: 3, student_id: student_list}).round%><%=w%></th>
    <th></th>
    <th><% m = Score.maximum(:math, :conditions => {test_id: 5, student_id: student_list}).round%><%=m%></th>
    <th><% r = Score.maximum(:reading, :conditions => {test_id: 5, student_id: student_list}).round%><%=r%></th>
    <th><% w = Score.maximum(:writing, :conditions => {test_id: 5, student_id: student_list}).round%><%=w%></th>
    <th></th>
  </tr>
  <tr>
    <th>Minimum</th>
    <th><% m = Score.minimum(:math, :conditions => {test_id: 3, student_id: student_list}).round%><%=m%></th>
    <th><% r = Score.minimum(:reading, :conditions => {test_id: 3, student_id: student_list}).round%><%=r%></th>
    <th><% w = Score.minimum(:writing, :conditions => {test_id: 3, student_id: student_list}).round%><%=w%></th>
    <th></th>
    <th><% m = Score.minimum(:math, :conditions => {test_id: 5, student_id: student_list}).round%><%=m%></th>
    <th><% r = Score.minimum(:reading, :conditions => {test_id: 5, student_id: student_list}).round%><%=r%></th>
    <th><% w = Score.minimum(:writing, :conditions => {test_id: 5, student_id: student_list}).round%><%=w%></th>
    <th></th>
  </tr>
</table>